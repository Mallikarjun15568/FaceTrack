{% extends "base_kiosk.html" %}
{% block title %}FaceTrack | Kiosk{% endblock %}

{% block content %}

<div class="min-h-screen w-full bg-gray-50 p-6 flex items-center justify-center">

  <div class="w-full max-w-7xl grid grid-cols-1 lg:grid-cols-2 gap-8">

    <!-- LEFT : CAMERA PANEL -->
    <div class="bg-white border border-gray-200 rounded-3xl p-8 shadow-sm">

      <!-- Header -->
      <div class="text-center mb-6">
        <h2 class="text-3xl font-bold text-gray-900">FaceTrack Kiosk</h2>
        <p class="text-gray-500 text-sm mt-1">
          Align your face inside the scan area
        </p>
      </div>

      <!-- Camera Box -->
      <div class="bg-gray-100 rounded-2xl p-4">
        <div class="relative w-full aspect-[4/3] rounded-xl overflow-hidden bg-black">

          <!-- LIVE CAMERA (DO NOT TOUCH) -->
          <video id="video" autoplay muted playsinline
                 class="w-full h-full object-cover"></video>

          <!-- SCAN CIRCLE -->
          <div id="scan-box"
               class="absolute inset-0 flex flex-col items-center justify-center">

            <div class="w-80 h-80 rounded-full border-4 border-blue-600
                        flex flex-col items-center justify-center">

              <div class="w-24 h-24 bg-gray-200 rounded-full
                          flex items-center justify-center">
                <i class="fas fa-user text-gray-500 text-4xl"></i>
              </div>

              <div class="mt-4 text-center">
                <h3 class="text-xl font-bold text-gray-900">SCANNING...</h3>
                <p class="text-sm text-gray-600">Look straight at camera</p>
              </div>

            </div>

          </div>

        </div>
      </div>

      <!-- Camera Status -->
      <div class="mt-4 text-center">
        <div class="inline-flex items-center gap-2 px-4 py-2
                    bg-green-50 border border-green-200 rounded-full">
          <span class="w-2 h-2 bg-green-500 rounded-full"></span>
          <span class="text-sm text-green-700 font-medium">Camera Active</span>
        </div>
      </div>

    </div>

    <!-- RIGHT : STATUS + LOGS -->
    <div class="bg-white border border-gray-200 rounded-3xl p-8 shadow-sm flex flex-col">

      <!-- Header -->
      <div class="flex justify-between items-center mb-6">
        <div>
          <h3 class="text-2xl font-bold text-gray-900">Attendance Panel</h3>
          <p class="text-sm text-gray-500 mt-1">
            Real-time recognition system
          </p>
        </div>

        <a href="{{ url_for('kiosk.kiosk_exit') }}"
           class="px-4 py-2 border border-red-300 text-red-600
                  rounded-xl hover:bg-red-50 transition font-semibold">
          Exit
        </a>
      </div>

      <!-- WAITING BLOCK -->
      <div id="waiting-block" class="mb-6">
        <div class="bg-gray-50 border border-gray-200 rounded-2xl p-5 flex gap-3 items-center">
          <div class="w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center">
            <i class="fas fa-hourglass-half text-gray-600"></i>
          </div>
          <div>
            <p class="font-semibold text-gray-900">Waiting for faceâ€¦</p>
            <p class="text-sm text-gray-500">
              Position yourself in the scan area
            </p>
          </div>
        </div>
      </div>

      <!-- EMPLOYEE CARD (JS USES THIS) -->
      <div id="employee-card" class="hidden mb-6">
        <div class="bg-green-50 border border-green-200 rounded-2xl p-6 flex gap-4 items-center">

          <img id="emp-photo"
               src="{{ url_for('static', filename='default_user.png') }}"
               class="w-20 h-20 rounded-full border border-gray-300 object-cover">

          <div class="flex-1">
            <div id="emp-name" class="text-2xl font-bold text-gray-900">
              Employee Name
            </div>
            <div id="emp-dept" class="text-sm text-gray-600 mt-1">
              Department
            </div>
            <div id="status-area" class="mt-2"></div>
          </div>

        </div>
      </div>

      <!-- RECENT ACTIVITY -->
      <div class="flex-1">
        <h4 class="text-lg font-bold text-gray-900 mb-4">
          Recent Activity
        </h4>

        <div id="logs-list" class="space-y-3 max-h-64 overflow-y-auto">
          <!-- JS inserts logs -->
        </div>
      </div>

    </div>

  </div>
</div>

{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/kiosk.js') }}"></script>
{% endblock %}
